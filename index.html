<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>MedAffairs.tech</title>
    <link rel="stylesheet" href="style.css" />
</head>
<body>

    <!-- Top: three photo headlines (clickable) -->
    <section class="hero-lockup">
        <a class="hero-item" href="#">
            <img class="hero-img" src="https://images.unsplash.com/photo-1581091870622-3f0b32b7f3b4?w=1200&q=80&auto=format&fit=crop" alt="Headline 1">
            <div class="headline">Breaking: Top Story One ‚Äî short title</div>
        </a>

        <a class="hero-item" href="#">
            <img class="hero-img" src="https://images.unsplash.com/photo-1509395176047-4a66953fd231?w=1200&q=80&auto=format&fit=crop" alt="Headline 2">
            <div class="headline">Exclusive: Top Story Two ‚Äî short title</div>
        </a>

        <a class="hero-item" href="#">
            <img class="hero-img" src="https://images.unsplash.com/photo-1512850185-6c1f2b4a4b9f?w=1200&q=80&auto=format&fit=crop" alt="Headline 3">
            <div class="headline">Update: Top Story Three ‚Äî short title</div>
        </a>
    </section>

    <!-- Main site title -->
    <header class="site-header">
        <h1 class="main-title">MEDAFFAIRS.TECH</h1>
    </header>

    <!-- Three columns of links below the title -->
    <main>
        <section class="columns">
            <div class="column industry">
                <div class="column-icon">üè¢</div>
                <h2>Industry News</h2>
                <ul>
                    <li><a href="#">AI in Clinical Trials</a></li>
                    <li><a href="#">Digital Health Startups</a></li>
                    <li><a href="#">Regulatory Updates</a></li>
                    <li><a href="#">Industry Story 4</a></li>
                </ul>
            </div>

            <div class="column tech">
                <div class="column-icon">üíª</div>
                <h2>Tech Insights</h2>
                <ul>
                    <li><a href="#">Data Analytics Trends</a></li>
                    <li><a href="#">Machine Learning in Med Affairs</a></li>
                    <li><a href="#">Blockchain Applications</a></li>
                    <li><a href="#">Tech Story 4</a></li>
                </ul>
            </div>

            <div class="column opinion">
                <div class="column-icon">üí¨</div>
                <h2>Products & Opinion</h2>
                <ul>
                    <li><a href="#">Expert Interviews</a></li>
                    <li><a href="#">Market Forecasts</a></li>
                    <li><a href="#">Ethics in AI</a></li>
                    <li><a href="#">Opinion Piece 4</a></li>
                </ul>
            </div>
        </section>
    </main>

    <script src="script.js"></script>

    <!-- Dynamic Article Loading -->
    <script>
    async function loadArticles() {
        try {
            // Fetch the articles.json file created by your Zaps
            const response = await fetch('./articles.json');
            const data = await response.json();
            
            console.log('Loaded articles:', data); // Debug log
            
            // Update hero sections with priority articles
            updateHeroSections(data.heroes || []);
            
            // Update column lists with approved articles  
            updateColumn('.industry ul', data.industry || []);
            updateColumn('.tech ul', data.tech || []);
            
            // Opinion column stays static since it's not in your 5 AI categories
            
        } catch (error) {
            console.error('Failed to load articles:', error);
            console.log('Using fallback static content');
        }
    }

    function updateHeroSections(heroes) {
        const heroItems = document.querySelectorAll('.hero-item');
        
        // Sort heroes by priority and update each section
        const sortedHeroes = heroes.sort((a, b) => {
            const priorityA = parseInt(a.priority) || 999;
            const priorityB = parseInt(b.priority) || 999;
            return priorityA - priorityB;
        });
        
        sortedHeroes.forEach((article, index) => {
            if (heroItems[index] && article && index < 3) {
                // Update hero link and headline
                heroItems[index].href = article.url;
                heroItems[index].querySelector('.headline').textContent = article.title;
                
                // Update alt text for accessibility
                const img = heroItems[index].querySelector('.hero-img');
                if (img) {
                    img.alt = article.title;
                }
            }
        });
        
        console.log(`Updated ${Math.min(sortedHeroes.length, 3)} hero sections`);
    }

    function updateColumn(selector, articles) {
        const list = document.querySelector(selector);
        if (list && articles.length > 0) {
            // Replace static content with dynamic articles
            list.innerHTML = articles.map(article => 
                `<li><a href="${article.url}" target="_blank">${article.title}</a></li>`
            ).join('');
            
            console.log(`Updated ${selector} with ${articles.length} articles`);
        }
    }

    // Load articles when page loads
    document.addEventListener('DOMContentLoaded', loadArticles);
    
    // Refresh articles every 5 minutes for live updates
    setInterval(loadArticles, 5 * 60 * 1000);
    </script>

    <footer>
        <p>&copy; 2025 MedAffairs.tech</p>
    </footer>

</body>
</html>
